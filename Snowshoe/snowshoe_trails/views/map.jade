extends layout
block content
    #map
    script.
        var myData = !{JSON.stringify(jsonData)};
            // Create variable to hold map element, give initial settings to map
            var map = L.map('map',{ center: [38.41514, -79.98964], zoom: 15});
            // Add OpenStreetMap tile layer to map element
            L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'
            }).addTo(map);
            // Add JSON to map
            L.geoJson(myData,{
                onEachFeature: function (feature, layer) {
                    layer.bindPopup(feature.properties.f2);
                    layer.on('mouseover', function (e) {
                        this.openPopup();
                    });
                    layer.on('mouseout', function (e) {
                        this.closePopup();
                    });
                },
                style: function(feature) {
                    switch (feature.properties.f3) {
                        case 'beginner': return {color: "#1ae582"};
                        case 'intermediate' : return {color: "#2441db"};
                        case 'advanced': return {color: "#2b0600"};
                        case 'expert': return {color:"#670068"};
                    }
                }
            }).addTo(map);

            //- map.locate({setView: true, maxZoom: 16});

            //- function onLocationFound(e) {
            //-     var radius = e.accuracy;

            //-     L.marker(e.latlng).addTo(map)
            //-         .bindPopup("You are within " + radius + " meters from this point").openPopup();

            //-     L.circle(e.latlng, radius).addTo(map);
            //- }

            //- map.on('locationfound', onLocationFound);

            //- function onLocationError(e) {
            //-     alert(e.message);
            //- }      

            //- map.on('locationerror', onLocationError);
    
    